<turbo-frame id="work_items">
  <h3 class="govuk-heading-m">
    <%= t('.work_items') %>
  </h3>

  <div class="govuk-body-m">
    <%= t('.core_cost') %>
    <div class="govuk-heading-l">
      <%= work_items_summary.summed_field %>
    </div>
  </div>

  <%= govuk_details(summary_text: t('.check_totals')) do %>
    <%=
      head = [t('.items'), t('.total_time'), t('.total_cost')]
      rows = work_items_summary.table_fields
      foot = [t('.total'), work_items_summary.summed_field]
      govuk_table(first_cell_is_header: true, head:, rows:, foot:)
    %>
  <% end %>

  <%= button_to(t(".remove_uplift_all"), '#', class: "govuk-button govuk-button--secondary", data_module: "govuk-button") %>


  <% work_items.each do |completed_on, work_items_for_date| %>
    <%=
      head = [t('.type_of_work'), t('.requested'), t('.adjusted'), t('.action')]
      rows = work_items_for_date.map do |work_item|
        [*work_item.table_fields, { text: link_to(t('.change'), '#') }]
      end
      govuk_table(caption: completed_on.strftime('%-d %B %Y'), head:, rows:)
    %>
  <% end %>
</turbo-frame>