<% content_for(:page_title) do %>
  &nbsp;
<% end %>


<div class="govuk-grid-row">
  <div class="govuk-grid-column-three-quarters govuk-!-padding-right-0">

    <%= render partial: 'claims/claim_summary', locals: { claim:, claim_summary: } %>
    <%= render partial: 'claims/claim_nav', locals: { claim: claim, current_page: 'history' } %>

    <h2 class="govuk-heading-m">
      <%= t('.history') %>
    </h2>

    <%=
      govuk_table do |table|
        history_events.each do |event|
          table.with_head do |head|
            head.with_row do |row|
              row.with_cell(text: t('.when'))
              row.with_cell(text: t('.caseworker'))
              row.with_cell(text: t('.what'))
            end
          end
          table.with_body do |body|
            body.with_row do |row|
              row.with_cell(text: l(event.created_at, format: '%B<br>%d %b %Y<br>%I:%m%P').html_safe)
              row.with_cell(text: event.primary_user&.name || '')
              row.with_cell do
    %>
                <p class="govuk-!-font-weight-bold"><%= event.title %></p>
                <%= event.body %>
              <% end
            end
          end
        end
      end %>

  </div>
</div>
